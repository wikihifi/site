<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>jQuery UI Example Page</title>
		<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.10.custom.css" rel="stylesheet" />	
		<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.8.10.custom.min.js"></script>
		<script type="text/javascript" src="js/solrjsonexample.js"></script>
		<script type="text/javascript" src="js/log4javascript.js"></script>
		
		<!-- ajax solr imports -->
		<script type="text/javascript" src="js/asjs/core/Core.js"></script>
				<script type="text/javascript" src="js/asjs/core/Parameter.js"></script>
				<script type="text/javascript" src="js/asjs/core/ParameterStore.js"></script>
		<script type="text/javascript" src="js/asjs/core/AbstractWidget.js"></script>
		<script type="text/javascript" src="js/asjs/widgets/ResultWidget.js"></script>
		
		<script type="text/javascript" src="js/asjs/core/AbstractManager.js"></script>
		<script type="text/javascript" src="js/asjs/managers/Manager.jquery.js"></script>
		<script type="text/javascript" src="js/asjs/helpers/jquery/ajaxsolr.theme.js""></script>
				<script type="text/javascript" src="js/asjs/helpers/jquery/jquery.livequery.js""></script>
		
		<script type="text/javascript" src="js/asjs/my.theme.js""></script>		
			
		
		<script type="text/javascript">
			//<![CDATA[
			// Create the logger
			//var log = log4javascript.getLogger(); 
		
			// Create a PopUpAppender with default options
			//var popUpAppender = new log4javascript.PopUpAppender();
			
			// Change the desired configuration options
			//popUpAppender.setFocusPopUp(true);
			//popUpAppender.setNewestMessageAtTop(true);
			
			// Add the appender to the logger
			//log.addAppender(popUpAppender);
			
			// Test the logger
			//log.debug("Hello world!");
			//]]>
		</script>
		
		<script type="text/javascript">
		var Manager;

		(function ($) {
		  $(function () {
		    Manager = new AjaxSolr.Manager({
		      solrUrl: 'http://localhost:9000/solr/'
		    });
		    Manager.init();
		  });
		  
		  AjaxSolr.ResultWidget = AjaxSolr.AbstractWidget.extend({});
		  
		  Manager.addWidget(new AjaxSolr.ResultWidget({
			  id: 'result',
			  target: '#result'
			}));
		  
		})(jQuery);
		
			$(function(){
				
				
				// setup graphic EQ
				$( "#eq > span" ).each(function() {
					// read initial values from markup and remove that
					var value = parseInt( $( this ).text(), 10 );
					$( this ).empty().slider({
						value: value,
						range: "min",
						min: 0,
						max: 10,
						animate: true,
						orientation: "vertical" ,
						slide: function( event, ui ) {
							var id = $(this).attr('id');
							$('#'+id+'_val').text(ui.value);
						} //http://jqueryui.com/demos/slider/#steps
					});
				});
				
				
				$('#searchForm').submit(function() {
					Manager.store.addByValue('q', $('search_field').text());
					Manager.doRequest();
					// alert('Handler for .submit() called.');
					//  var url = 'http://localhost:9000/solr/select';
					//  var data = "q=smith&rows=10&wt=json";
					
					  xmlhttpPost(url);
					 /* 
					  $.getJSON(url + '?rows=10&wt=json&q=' + $('#search_field').val(), 
							  function parseResponse(rsp) {
							// var rsp = eval("("+rsp+")"); // use eval to parse Solr's JSON response
							alert(rsp);
							  var html= "<br>numFound=" + rsp.response.numFound;
							  var first = rsp.response.docs[0];
							  html += "<br>product name="+ first.name;
							  var hl=rsp.highlighting[first.id];
							  if (hl.name != null) { html += "<br>name highlighted: " + hl.name[0]; }
							  if (hl.features != null) { html += "<br>features highligted: " + hl.features[0]; }
							  document.getElementById("result").innerHTML = html;
						}
					  ); */
					//  return false;
				});
				
			});
			
		
				//$('#searchForm').submit(function() {
				//	  alert('Handler for .submit() called.');
					 // return false;
					
				//var url = 'http://localhost:9000/solr/select';
				//var data = {q: $('search_field').text() };
				
				//$.getJSON(url + '?rows=10&q=' + $('search_field').text(), parseResponse);
				//$.post( url,  data,  success(data, textStatus, jqXHR), [ dataType ] )
				//});
			
			
		</script>
		<style type="text/css">
			/*demo page css*/
			body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
			.demoHeaders { margin-top: 2em; }
			#dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
			#dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
			ul#icons {margin: 0; padding: 0;}
			ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
			ul#icons span.ui-icon {float: left; margin: 0 4px;}
			#eq_header span {font-size: 2em; margin: 5px;}
			#eq span {height:300px; float:left; margin:30px;}
			#eq_values {clear:both;}
			#eq_values span {clear:both; font-size: 2em;  margin: 25px;}
		</style>	
	</head>
	<body>
	    <form id="searchForm">
			<input id="search_field" class="defaultText" title="search" type="text" value="smith" />
			<input type="submit" value="go"/>
		</form>
		<!-- Slider -->
		<h2 style="font-size: 2.5em; text-align:left;">Change Importance of search terms:</h2>
		<!--   <div id="slider"></div>-->
		<div id="eq_header">
		 <span>Term 1</span>
		 <span>Term 2</span>
		 <span>Term 3</span>
		 <span>Term 4</span>
		 <span>Term 5</span>
		 <span>Term 6</span>
		 <span>Term 7</span>
		</div>		
		<div id="eq">
			<span id="q1">3.3</span>
			<span id="q2">7.7</span>
			<span id="q3">5.5</span>
			<span id="q4">3.3</span>
			<span id="q5">4.0</span>
			<span id="q6">4.5</span>
			<span id="q7">7.0</span>
			
		</div>
		
			<span id="q1_val">3.3</span>
			<span id="q2_val">7.7</span>
			<span id="q3_val">5.5</span>
			<span id="q4_val">3.3</span>
			<span id="q5_val">4.0</span>
			<span id="q6_val">4.5</span>
			<span id="q7_val">7.0</span>
			
			<div id="result"></div>
	</body>
</html>


